# Linux

## 一、网络连接

### 桥接模式

**虚拟系统与外部直接通信**

### NAT模式

### 主机模式



## 二、远程登录

- 获取公网IP 命令：ifconfig
- 使用Xshell中**新建会话**
- Xshell中输入的IP，使用ifconfig获得的ip即可，主机名称随便写

## 三、 用户管理

### 3.1 添加用户名     命令：useradd 用户名

- 也可以通过 useradd -d 指定目录，新增的用户命（useradd -d /home/test king）

### 3.2 指定/修改密码      命令：passwd  用户名（若没有指定用户名则默认当登录账户） 

- **pwd（显示当前你在哪个目录下）**

### 3.3 删除用户    命令：userdel

- userdel -r（删除用户及其用户主目录）

### 3.4 查询用户信息指令     命令：id  用户名

### 3.5 切换用户    命令：su -用户名

- 权限高的用户切换至权限低的用户不需要密码
- 返回原来的用户使用 **命令：logout / exit**

### 3.6 查看当前登录用户    命令：whoami / who am I

- 显示的是第一次登录的账户

### 3.7 用户组 

- **新增组**：groupadd 组名
- **删除组**：groupdel 组名
- **增加用户直接加上组**：useradd -g 用户组 用户名
- **修改用户的组**：usermod -g 用户组 用户名

### 3.8 用户和组相关文件

- **/etc/passwd文件**：
  - **用户名：口令：用户标识号：注释性描述：主目录：登录shell**

- **/etc/shadow文件**：
  - **登录名：加密口令：最后一次修改事件：最小间隔时间：最大间隔时间：警告时间：不活动时间：失效时间：标志**

- **/etc/group文件**：
  - **组名：口令：组 标识号：组内用户列表**

## 四、运行级别

- **运行级别说明**：
  - **0**：关机
  - **1**：单用户
  - **2**：多用户状态没有网络服务
  - **3**：多用户状态有网络服务
  - **4**：系统未使用保留给用户
  - **5**：图形界面
  - **6**：系统重启

- **/etc/inittab文件**
- **查看当前默认运行级别**：systemctl get-default
- **设置默认允许级别**：systemctl set-deault TRAGET.target

***找回 root 用户密码***

## 五、帮助指令

- man 获得帮助信息
- help 指令

## 六、文件目录类

- **pwd 指令**：显示当前工作目录的绝对路径
- **ls 指令**  ls [选项] [目录或是文件]
  - -a：显示当前目录所有的文件和目录，包括隐藏的
  - -l： 以列表的方式显示的信息

- **cd 指令**  cd [参数] ：切换到指定目录
- **cd ~**：回到自己的家目录
- **cd ..**：回到上级目录

- **mkdir 指令** [默认创建一级目录]：创建目录
  
  - **-p** ：创建多级目录
  
- **rmdir 指令**：删除空目录（删除非空目录会失败）
  
- **rmdir [选项] [要删除的空目录]**
  
- **touch 指令**：创建空文件
- **cp 指令**：拷贝文件到指定目录
  
  - **cp [选项] source dest**
    - **选项**：-r，递归复制整个文件夹
  
  - **\cp**：强制覆盖不接受提示

- **rm 指令**：移除文件或者目录
  - **rm [选项] 要删除的文件或目录**
  - **-r**：递归删除整个文件夹
  - **-f**：强制删除不提示

- **mv 指令** 
  - **移动文件 与 目录重命名**
  - **mv 老文件 新文件(重命名)**
  - **mv /temp/movefile  /targetfile（移动文件）**

- **cat 指令**
  - **查看文件内容（只读）**
  - **cat [选项]  要查看的文件名称**
    - **-n**：显示行号

- **more 指令**
  - **more 要查看的文件**
  - **交互指令，内部有若干快捷键**

- **less 指令**
  - **less要查看的文件**
  - **与more类似，内部有若干快捷键**

- **echo 指令**
  - **输出内容到控制台**
  - **基本语法**：
    - **echo [选项] [输出内容]**

- **head 指令**：显示文件开头部分的内容
  - **基本语法**
    - **head [选项] 行数 文件**

- **tail 指令**：显示文件结尾部分
  - **基本语法**
    - **tail [选项] 文件**
    - **-f**：实时追踪文档所有更新（ctrl + C 退出）

- **> 指令 和  >> 指令**：> 输出重定向 和  >> 增加
  - **基本语法**
    - **ls -l 文件**：列表的内容写入 a.txt文件中（覆盖写）
    - **ls -a >> 文件**：列表的内容追加到文件aa.txt中的末尾
    - **cat 文件1 > 文件2**：将文件1的内容覆盖到文件2
    - **echo "内容" >> 文件**：追加

- **ln 指令**：类似于Windows里面的快捷方式，主要存放了其他文件路径

  - **基本语法**

    - **ls -s [源文件或者目录] [软件链接名]（给原文件创建一个软链接）**

    - 当我们使用 pwd 指令查看目录的时候，仍然看到的是软件链接所在目录

- **history 指令**：可以查看已经执行过的历史命令

  - **基本语法**

    - **history**

    - **![数字]**：执行历史命令，数字代表历史编号

## 七、时间日期类

- **date 指令 - 显示当前日期**
  - **基本语法**
    - **date**：显示当前时间
    - **date + %Y**：显示当前年份
    - **date + %m**：显示当前月份
    - **date "+%Y-%m-%d %H:%:M:%S"**：显示年月日时分秒

- **date 指令 - 设置日期**
  - **基本语法**
    - **date -s 字符串时间**

- **cal 指令 - 查看日历**

## 八、搜索查找类

- **find 指令**：将从指定目录下面向下递归遍历其各个子目录，将满足条件的文件或者目录显示在终端
  - **基本语法**
    - **find [搜索范围] [选项]**
      - **[选项]**
        - **-name<查询方式>**：按照指定文件名查找
        - **-user <用户名>**：查找属于指定用户所有文件
        - **-size<文件大小>**：按照指定的文件大小查找文件（记得带单位）



- **loacte 指令**：快速定位文件路径

  - **基本语法**
    - **locate 搜索文件**

  * **特别说明**
    - locate 指令基于数据库进行查询，所以第一次运行前，必须使用 updatedb 指令创建 locate 数据库



- **grep 指令和管道符号 | **：grep 过滤查找。管道  ” | “，表示将前一个命令的结果输出传递后面的命令处理
  - **基本语法**
    - **gerp [选项] 查找内容 源文件**
      - **-n**：显示匹配行和行号
      - **-i**：忽略大小写

## 九、压缩和解压

- **gzip/gunzip 指令**：gzip 用于压缩文件，gunzip 用于解压的
  - **基本语法**
    - **gzip 文件**（解压文件，只能将文件解压为 *.gz文件）
    - **gunzip 文件**（解压文件命令）

- **zip / unzip指令**：同上，*这个项目打包发布中很有用*
  - **基本语法**
    - **zip [选项]  xxx.zip **（压缩文件和目录的命令）
      - **-r**：递归压缩，压缩目录
    - **unzip [选项]  xxx.zip**（解压）
      - -d <目录>：指定解压后文件的存放目录

- **tar 指令**：打包指令，打包后的文件时 tar.gz 的文件
  - **基本语法**
    - **tar [选项]   xxx.tar.gz 打包的内容**（打包目录，压缩后的文件格式.tar.gz）
      - **选项说明**
        - **-c**：产生 .tar 打包文件
        - **-v**：显示详细信息
        - **-f**：指定压缩文件后的文件名
        - **-z**：打包同时压缩
        - **-x**：解包 .tar 文件



## 十、组管理和权限管理

###     文件/目录    所有者

- #### 查看文件所有者

  - **is -ahl**

- #### 修改文件所有者

  - **chown 用户名 文件名**

###    文件/目录    所在组

- #### 查看文件所在组

  - **ls -ahl 或者 ll**

- #### 修改文件所在组

  - **chgrp 组名 文件名**

### 权限的基本介绍

- #### ls -l 中显示的内容说明

  1.  **第 0 位确定文件类型（d, -, l , c, b）**
     1. l 是链接，相当于 windows 的快捷方式
     2. d 是目录，相当于 windows 的文件夹
     3. c 是字符设备文件，鼠标，键盘
     4. b 是块设备，比如硬盘

  2. **第 1-3 位确定文件所有者（该文件所有者）拥有该文件的权限。---- User**
  3. **第 4-6 位确定所属组（同组用户）该文件的权限。----Group**
  4. **第 7-9 位确定其他用户拥有该文件的权限。----Other**

- **rwx 作用到文件**

  1. **[ r ] 代表可读（read）：可以读取, 查看**
  2. **[ w ] 代表可写（write）：可以修改，但是不代表可以删除文件。**
     - **删除文件的前提是，对该文件所在的目录有权限，才能删除文件**
  3. **[ x ] 代表可执行（excute）：可以被执行**

- **rwx 作用到目录**

  1. **[ r ] 代表可读（read）：可以读取, 查看**

  2. **[ w ] 代表可写（write）：可以修改，对目录内容创建+ 删除 + 重命名目录**
  3. **[ x ] 代表可执行（excute）：可以进入目录**

- #### 修改权限 chmod

  - **基本语法**
    - **说明 u：所有者，g：所有组，o：其他人，a：所有人**
    - **chmod u = rwx，g = rx, o = x  文件名/目录名**
    - **chmod o+w（+代表赋予权限）  文件名/目录名**
    - **chmod a-x（-代表去除权限） 文件名/目录名**
  - **方法二，通过数字权限变更**
    - **r=4 w=2 x=1  rwx = 4+2+1 = 7**

- #### 修改文件所有者 chown

  - **基本语法**
    - **chown newowner  文件/目录  （改变所有者）**
    - **chown newowner:newgroup  文件/目录  （改变所有者和所在组）**
      - -R 如果是目录 则使其下所有子文件或者目录递归生效

- #### 修改文件/目录所在组 chgrp

  - **基本语法**
    - **chgrp newgroup 文件/目录（改变所在组）**

## 十一、定时任务调度

### crond  任务调度

- #### crontab 进行 定时任务的设置

- **概述**

  - **任务调度：是指系统在某个时间执行特定的命令或者程序**
  - **任务调度分类：**
    	1. 系统工作：有些重要的工作必须周而复始的进行
     	2. 个别用户工作：个别用户可能希望执行某些程序，比如对mysql数据库的备份

- **基本语法：**
  - **crontab [选项]**
    - -e —— 编辑 crontab 定时任务
    - -l —— 查询 crontab 任务
    - -r —— 删除当前用户所有 crontab 任务

- **5个占位符**

  1. 一个小时当中的几分钟
  2. 一天当中的第几个小时
  3. 一个月当中的第几天
  4. 一年当中的第几个月
  5. 一周当中的星期几

- **特殊符号说明**

  - *：代表任何时间。
  - ,：代表任何不连续的时间。比如 0，8，12，16 * * * 命令，就代表在每天的8点0分，12点0分，16点0分都执行一次命令
  - -：表示连续的时间范围。比如0 5 * * 1-6 的命令，代表在周一到周六的凌晨
  - */n：代表每隔多久执行一次。比如 * /10* * * * 命令，代表每隔十分钟就执行一次命令

- **crond 相关指令**
  - crontab -r：终止任务调度
  - crontab -l：列出当前有哪些任务调度
  - service crond restart [重启任务调度]

### at 定时任务

- #### 基本介绍

  1. at 命令是一次性定时计划任务，at 的守护进程 atd 会以后台模式运行，检查作业队列来运行。
  2. 默认情况下， atd 守护进程每 60 秒检查作业列队